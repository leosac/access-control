<?xml version="1.0"?>
<kernel>
    <instance_name>Leosac</instance_name>
    <plugin_directories>
        <plugindir>/usr/lib/leosac</plugindir>
        <plugindir>/usr/lib/leosac/auth</plugindir>
    </plugin_directories>
    <network>
        <enabled>false</enabled>
    </network>
    <modules>
        <module>
            <name>PIFACEDIGITAL_GPIO</name>
            <file>libpifacedigital.so</file>
            <level>2</level>
            <module_config>
                <gpios>
                    <gpio>
                        <name>my_door_gpio</name>
                        <no>3</no>
                        <direction>out</direction>
                        <value>false</value>
                    </gpio>
                    <gpio>
                        <name>wiegand_data_high</name>
                        <no>1</no>
                        <direction>in</direction>
                    </gpio>
                    <gpio>
                        <name>wiegand_data_low</name>
                        <no>0</no>
                        <direction>in</direction>
                    </gpio>
                </gpios>
            </module_config>
        </module>

        <module>
            <name>WIEGAND_READER</name>
            <file>libwiegand.so</file>
            <level>5</level>
            <module_config>
                <readers>
                    <reader>
                        <name>MY_WIEGAND_1</name>
                        <high>wiegand_data_high</high>
                        <low>wiegand_data_low</low>
                        <green_led></green_led>
                        <buzzer></buzzer>
                    </reader>
                </readers>
            </module_config>
        </module>

        <module>
            <name>AUTH_FILE</name>
            <file>libauth-file.so</file>
            <level>41</level>
            <module_config>
                <instances>
                    <instance>
                        <name>AUTH_CONTEXT_1</name>
                        <auth_source>MY_WIEGAND_1</auth_source>
                        <config_file>auth.xml</config_file>
                        <target>doorA</target>
                    </instance>
                </instances>
            </module_config>
        </module>

        <module>
            <name>DOORMAN</name>
            <file>libdoorman.so</file>
            <level>50</level>
            <module_config>
                <instances>
                    <instance>
                        <name>A_DOORMAN_INSTANCE</name>
                        <auth_contexts>
                            <auth_context>
                                <name>AUTH_CONTEXT_1</name>
                            </auth_context>
                        </auth_contexts>
                        <actions>
                            <action>
                                <on>GRANTED</on>
                                <target>my_door_gpio</target>
                                <cmd>
                                    <f2>ON</f2>
                                    <f3>3000</f3>
                                </cmd>
                            </action>
                        </actions>
                    </instance>
                </instances>
            </module_config>
        </module>
    </modules>
</kernel>
